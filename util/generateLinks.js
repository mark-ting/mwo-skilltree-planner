process.chdir(__dirname)
const jsonfile = require('jsonfile')

let firepower = ['0,1', '23,25', '1,4', '2,4', '0,2', '1,3', '3,20', '20,22', '22,6', '6,8', '8,26', '26,40', '40,29', '29,189', '26,41', '41,55', '55,51', '51,32', '32,45', '32,46', '46,48', '34,57', '34,63', '34,53', '47,49', '47,59', '33,47', '33,35', '35,59', '52,33', '31,14', '14,46', '14,34', '31,19', '19,34', '19,47', '4,23', '3,15', '15,23', '16,23', '5,16', '2,5', '5,21', '21,24', '24,7', '7,9', '9,62', '30,187', '5,60', '60,37', '24,37', '25,11', '11,50', '25,10', '10,50', '50,31', '37,39', '39,11', '11,13', '13,186', '186,31', '10,12', '12,188', '188,31', '39,18', '18,28', '28,61', '37,58', '58,27', '27,42', '42,30', '24,58', '9,27', '27,28', '28,44', '13,44', '44,52', '44,33', '3,54', '54,36', '36,56', '56,26', '22,56', '22,36', '36,38', '38,10', '38,17', '17,41', '41,51', '41,43', '43,51', '43,32', '12,43', '61,52', '28,52', '25,50']
let mobility = ['117,107', '107,125', '125,101', '117,124', '124,108', '108,131', '107,118', '124,118', '125,109', '118,109', '118,126', '108,126', '109,119', '109,110', '126,121', '126,120', '119,127', '119,110', '120,121', '120,122', '127,102', '127,103', '110,103', '110,112', '121,112', '121,123', '122,123', '122,128', '102,111', '103,113', '112,113', '112,114', '123,114', '128,132', '111,129', '113,129', '114,130', '132,130', '129,133', '129,104', '130,105', '130,134', '133,115', '104,115', '105,116', '134,116', '115,136', '115,106', '116,135', '116,137', '136,106', '137,135', '106,138', '135,139', '138,140', '139,140']
let survivability = ['64,92', '64,97', '92,82', '97,82', '92,65', '97,66', '82,65', '82,66', '65,72', '72,93', '93,73', '66,83', '83,95', '95,74', '65,98', '72,84', '98,84', '66,94', '83,67', '94,67', '94,85', '98,85', '85,86', '84,76', '76,69', '86,69', '67,87', '86,71', '87,71', '67,70', '70,87', '84,68', '68,76', '73,68', '68,75', '70,88', '74,70', '69,77', '69,90', '71,91', '71,89', '91,79', '91,96', '90,96', '90,78', '96,80', '96,81']
let sensors = ['195,200', '200,213', '195,190', '190,196', '196,210', '200,191', '190,191', '200,197', '190,192', '191,197', '191,192', '192,201', '197,201', '197,198', '192,214', '214,194', '194,204', '198,193', '193,199', '198,205', '193,206', '206,235', '199,212', '199,208', '193,203', '194,203', '194,207', '207,236', '204,209', '214,202', '202,211']
let jumpjets = ['156,151', '156,146', '146,141', '151,157', '146,157', '146,147', '147,142', '157,147', '157,152', '152,158', '147,158', '158,153', '158,148', '148,159', '153,159', '159,154', '154,144', '153,143', '151,152', '152,153', '153,154', '154,155', '154,160', '160,155', '159,149', '148,149', '147,148', '149,150', '149,160', '160,150', '150,145']
let operations = ['161,183', '161,179', '183,166', '179,166', '183,176', '179,180', '166,176', '166,180', '180,168', '168,172', '176,167', '167,171', '176,177', '177,178', '167,162', '162,178', '177,173', '173,178', '180,184', '184,173', '173,181', '184,181', '168,163', '163,181', '178,169', '178,164', '181,164', '164,182', '182,165', '164,185', '185,165', '165,174', '165,175', '181,170']
let misc = ['215,222', '222,220', '220,219', '219,221', '215,228', '228,229', '229,227', '227,230', '227,217', '219,216', '220,99', '222,231', '231,233', '222,224', '228,224', '228,232', '224,231', '231,99', '224,225', '224,232', '232,100', '229,100', '231,225', '232,225', '232,234', '100,234', '99,233', '225,233', '225,234', '225,223', '223,226', '223,218']
let links = {}

function addLinks (tree) {
  for (let i = 0; i < tree.length; i++) {
    let nodes = tree[i].split(',')
    let start = nodes[0]
    let stop = nodes[1]

    if (links[start]) {
      links[start].push(stop)
    } else {
      links[start] = [stop]
    }
  }
}

addLinks(firepower)
addLinks(mobility)
addLinks(survivability)
addLinks(sensors)
addLinks(jumpjets)
addLinks(operations)
addLinks(misc)

jsonfile.writeFile('out/NodeLinks.json', links, () => {
  console.log('Node links generated!')
})
